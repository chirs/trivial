# Create a random image field.
# Used for trivia flag.

from PIL import Image

import os
import math


SRC_FOLDER = '/Users/chris/Desktop/trimmed'
DST = '/Users/chris/Desktop/main.jpg'


def create_mosaic():
    """
    """
    SCALE = 200

    items = sorted([e for e in os.listdir(SRC_FOLDER) if e.endswith('.png')])
    #print(len(items))
    
    rows = int(math.floor(math.sqrt(len(items)))) + 1
    cols = rows

    size = [SCALE * rows, SCALE * cols]

    #print(size)

    mosaic = Image.new("RGB", size, "white")

    l = []

    for row in range(rows):
        for col in range(cols):
            l.append((row, col))

    for fn, location in zip(items, l):
        p = os.path.join(SRC_FOLDER, fn)
        image = Image.open(p)
        image.thumbnail([SCALE, SCALE], Image.ANTIALIAS)
        xy = [SCALE * e for e in location]
        box = [xy[0], xy[1], xy[0] + SCALE, xy[1] + SCALE]
        mosaic.paste(image, box)

    mosaic.save(DST)


if __name__ == "__main__":
    create_mosaic()


    
